{
  "info": {
    "_postman_id": "pacientes-api-collection-updated",
    "name": "Pacientes API Completa - Gateway",
    "description": "Colecci√≥n completa de Postman para la API de Pacientes con Gateway. Todas las respuestas devuelven JSON consistente con campos 'success', 'data' o 'error', y 'timestamp'.",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json",
    "_exporter_id": "pacientes-api"
  },
  "variable": [
    { "key": "base_url", "value": "http://localhost:8081" },
    { "key": "jwt_token", "value": "" },
    { "key": "paciente_id", "value": "" },
    { "key": "historia_id", "value": "" },
    { "key": "consulta_id", "value": "" },
    { "key": "cita_id", "value": "" }
  ],
  "item": [
    {
      "name": "üîê Autenticaci√≥n",
      "item": [
        {
          "name": "Login Proxy",
          "request": {
            "method": "POST",
            "header": [{ "key": "Content-Type", "value": "application/json" }],
            "body": {
              "mode": "raw",
              "raw": "{ \"credentialsBase64\": \"YWRtaW46YWRtaW4=\" }"
            },
            "url": { "raw": "{{base_url}}/api/auth/proxy/login", "host": ["{{base_url}}"], "path": ["api","auth","proxy","login"] },
            "description": "Autenticaci√≥n proxy para obtener token JWT. Usa admin:admin en base64."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData && jsonData.success && jsonData.data && jsonData.data.token) {",
                  "    pm.environment.set('jwt_token', jsonData.data.token);",
                  "    console.log('‚úÖ Token JWT guardado:', jsonData.data.token.substring(0, 20) + '...');",
                  "} else {",
                  "    console.log('‚ùå Error obteniendo token:', jsonData);",
                  "}"
                ]
              }
            }
          ]
        }
      ]
    },
    {
      "name": "üë• Gesti√≥n de Pacientes",
      "item": [
        {
          "name": "Crear Paciente (JSON Directo)",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"numeroDocumento\": \"12345678\",\n  \"tipoDocumento\": \"CC\",\n  \"datosJson\": \"{\\\"numeroDocumento\\\":\\\"12345678\\\",\\\"tipoDocumento\\\":\\\"CC\\\",\\\"datosJson\\\":\\\"{\\\\\\\"informacionPersonal\\\\\\\":{\\\\\\\"primerNombre\\\\\\\":\\\\\\\"JOSE\\\\\\\",\\\\\\\"segundoNombre\\\\\\\":\\\\\\\"FRANCISCO\\\\\\\",\\\\\\\"primerApellido\\\\\\\":\\\\\\\"MEDINA\\\\\\\",\\\\\\\"segundoApellido\\\\\\\":\\\\\\\"GONZALEZ\\\\\\\",\\\\\\\"fechaNacimiento\\\\\\\":\\\\\\\"1997-06-22\\\\\\\",\\\\\\\"genero\\\\\\\":\\\\\\\"MASCULINO\\\\\\\",\\\\\\\"estadoCivil\\\\\\\":\\\\\\\"SOLTERO\\\\\\\"},\\\\\\\"informacionContacto\\\\\\\":{\\\\\\\"telefono\\\\\\\":\\\\\\\"3142964401\\\\\\\",\\\\\\\"email\\\\\\\":\\\\\\\"jofame_29@hotmail.com\\\\\\\",\\\\\\\"direccion\\\\\\\":\\\\\\\"carrera 23 # 46b - 26\\\\\\\",\\\\\\\"ciudad\\\\\\\":\\\\\\\"BUCARAMANGA\\\\\\\",\\\\\\\"departamento\\\\\\\":\\\\\\\"SANTANDER\\\\\\\",\\\\\\\"pais\\\\\\\":\\\\\\\"Colombia\\\\\\\"},\\\\\\\"informacionMedica\\\\\\\":{\\\\\\\"eps\\\\\\\":\\\\\\\"NUEVA EPS\\\\\\\",\\\\\\\"tipoSeguro\\\\\\\":\\\\\\\"CONTRIBUTIVO\\\\\\\",\\\\\\\"alergias\\\\\\\":\\\\\\\"NINGUNA\\\\\\\",\\\\\\\"medicamentosActuales\\\\\\\":\\\\\\\"\\\\\\\",\\\\\\\"observacionesMedicas\\\\\\\":\\\\\\\"\\\\\\\"},\\\\\\\"contactoEmergencia\\\\\\\":{\\\\\\\"nombreContacto\\\\\\\":\\\\\\\"CARMEN RIOS\\\\\\\",\\\\\\\"telefonoContacto\\\\\\\":\\\\\\\"3145697022\\\\\\\",\\\\\\\"relacion\\\\\\\":\\\\\\\"FAMILIAR\\\\\\\"}}\\\",\\\"activo\\\":true}\"\n}"
            },
            "url": { "raw": "{{base_url}}/api/pacientes", "host": ["{{base_url}}"], "path": ["api","pacientes"] },
            "description": "Crea un nuevo paciente enviando JSON crudo. La respuesta incluye success: true, data: {...}, timestamp."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData && jsonData.success && jsonData.data && jsonData.data.id) {",
                  "    pm.environment.set('paciente_id', jsonData.data.id);",
                  "    console.log('‚úÖ Paciente creado con ID:', jsonData.data.id);",
                  "} else {",
                  "    console.log('‚ùå Error creando paciente:', jsonData);",
                  "}",
                  "pm.test('Respuesta exitosa', function () { pm.response.to.have.status(201); });",
                  "pm.test('Formato de respuesta correcto', function () { pm.expect(jsonData).to.have.property('success'); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Actualizar Paciente",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"numeroDocumento\": \"12345678\",\n  \"tipoDocumento\": \"CC\",\n  \"datosJson\": \"{\\\"numeroDocumento\\\":\\\"12345678\\\",\\\"tipoDocumento\\\":\\\"CC\\\",\\\"datosJson\\\":\\\"{\\\\\\\"informacionPersonal\\\\\\\":{\\\\\\\"primerNombre\\\\\\\":\\\\\\\"JOSE\\\\\\\",\\\\\\\"segundoNombre\\\\\\\":\\\\\\\"FRANCISCO\\\\\\\",\\\\\\\"primerApellido\\\\\\\":\\\\\\\"MEDINA\\\\\\\",\\\\\\\"segundoApellido\\\\\\\":\\\\\\\"GONZALEZ\\\\\\\",\\\\\\\"fechaNacimiento\\\\\\\":\\\\\\\"1997-06-22\\\\\\\",\\\\\\\"genero\\\\\\\":\\\\\\\"MASCULINO\\\\\\\",\\\\\\\"estadoCivil\\\\\\\":\\\\\\\"SOLTERO\\\\\\\"},\\\\\\\"informacionContacto\\\\\\\":{\\\\\\\"telefono\\\\\\\":\\\\\\\"3142964401\\\\\\\",\\\\\\\"email\\\\\\\":\\\\\\\"jofame_29@hotmail.com\\\\\\\",\\\\\\\"direccion\\\\\\\":\\\\\\\"carrera 23 # 46b - 26\\\\\\\",\\\\\\\"ciudad\\\\\\\":\\\\\\\"BUCARAMANGA\\\\\\\",\\\\\\\"departamento\\\\\\\":\\\\\\\"SANTANDER\\\\\\\",\\\\\\\"pais\\\\\\\":\\\\\\\"Colombia\\\\\\\"},\\\\\\\"informacionMedica\\\\\\\":{\\\\\\\"eps\\\\\\\":\\\\\\\"NUEVA EPS\\\\\\\",\\\\\\\"tipoSeguro\\\\\\\":\\\\\\\"CONTRIBUTIVO\\\\\\\",\\\\\\\"alergias\\\\\\\":\\\\\\\"NINGUNA\\\\\\\",\\\\\\\"medicamentosActuales\\\\\\\":\\\\\\\"LOSARTAN 50MG\\\\\\\",\\\\\\\"observacionesMedicas\\\\\\\":\\\\\\\"PACIENTE ESTABLE\\\\\\\"},\\\\\\\"contactoEmergencia\\\\\\\":{\\\\\\\"nombreContacto\\\\\\\":\\\\\\\"CARMEN RIOS\\\\\\\",\\\\\\\"telefonoContacto\\\\\\\":\\\\\\\"3145697022\\\\\\\",\\\\\\\"relacion\\\\\\\":\\\\\\\"FAMILIAR\\\\\\\"}}\\\",\\\"activo\\\":true}\"\n}"
            },
            "url": { "raw": "{{base_url}}/api/pacientes/{{paciente_id}}", "host": ["{{base_url}}"], "path": ["api","pacientes","{{paciente_id}}"] },
            "description": "Actualiza un paciente existente. Respuesta: success: true, data: {...}, timestamp."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Respuesta exitosa', function () { pm.response.to.have.status(200); });",
                  "pm.test('Formato de respuesta correcto', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData).to.have.property('success', true);",
                  "    pm.expect(jsonData).to.have.property('data');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Obtener Paciente por ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/pacientes/{{paciente_id}}", "host": ["{{base_url}}"], "path": ["api","pacientes","{{paciente_id}}"] },
            "description": "Obtiene un paciente espec√≠fico por ID. Respuesta: success: true, data: {...}, timestamp."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Respuesta exitosa', function () { pm.response.to.have.status(200); });",
                  "pm.test('Datos del paciente correctos', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data).to.have.property('numeroDocumento');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Obtener Paciente por Documento",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/pacientes/documento/12345678", "host": ["{{base_url}}"], "path": ["api","pacientes","documento","12345678"] },
            "description": "Busca paciente por n√∫mero de documento. Respuesta: success: true, data: {...}, timestamp."
          }
        },
        {
          "name": "Listar Pacientes Activos",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": {
              "raw": "{{base_url}}/api/pacientes?page=0&size=10",
              "host": ["{{base_url}}"],
              "path": ["api","pacientes"],
              "query": [
                { "key": "page", "value": "0" },
                { "key": "size", "value": "10" }
              ]
            },
            "description": "Lista pacientes activos con paginaci√≥n. Respuesta: success: true, data: {page, content[]}, timestamp."
          }
        },
        {
          "name": "Buscar por Nombre",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": {
              "raw": "{{base_url}}/api/pacientes/buscar/nombre?nombre=JOSE",
              "host": ["{{base_url}}"],
              "path": ["api","pacientes","buscar","nombre"],
              "query": [{ "key": "nombre", "value": "JOSE" }]
            },
            "description": "Busca pacientes por nombre. Respuesta: success: true, data: {page, content[]}, timestamp."
          }
        },
        {
          "name": "Buscar por EPS",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": {
              "raw": "{{base_url}}/api/pacientes/buscar/eps?eps=NUEVA EPS",
              "host": ["{{base_url}}"],
              "path": ["api","pacientes","buscar","eps"],
              "query": [{ "key": "eps", "value": "NUEVA EPS" }]
            },
            "description": "Busca pacientes por EPS. Respuesta: success: true, data: {page, content[]}, timestamp."
          }
        },
        {
          "name": "Buscar por Rango de Edad",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": {
              "raw": "{{base_url}}/api/pacientes/buscar/edad?edadMinima=20&edadMaxima=40",
              "host": ["{{base_url}}"],
              "path": ["api","pacientes","buscar","edad"],
              "query": [
                { "key": "edadMinima", "value": "20" },
                { "key": "edadMaxima", "value": "40" }
              ]
            },
            "description": "Busca pacientes por rango de edad. Respuesta: success: true, data: {page, content[]}, timestamp."
          }
        },
        {
          "name": "Verificar Existencia por Documento",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/pacientes/existe/12345678", "host": ["{{base_url}}"], "path": ["api","pacientes","existe","12345678"] },
            "description": "Verifica si existe paciente con documento. Respuesta: success: true, data: boolean, timestamp."
          }
        },
        {
          "name": "Obtener Estad√≠sticas",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/pacientes/estadisticas", "host": ["{{base_url}}"], "path": ["api","pacientes","estadisticas"] },
            "description": "Obtiene estad√≠sticas de pacientes. Respuesta: success: true, data: {...}, timestamp."
          }
        },
        {
          "name": "Desactivar Paciente",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/pacientes/{{paciente_id}}", "host": ["{{base_url}}"], "path": ["api","pacientes","{{paciente_id}}"] },
            "description": "Desactiva un paciente (soft delete). Respuesta: success: true, message: '...', timestamp."
          }
        },
        {
          "name": "Reactivar Paciente",
          "request": {
            "method": "PATCH",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/pacientes/{{paciente_id}}/reactivar", "host": ["{{base_url}}"], "path": ["api","pacientes","{{paciente_id}}","reactivar"] },
            "description": "Reactiva un paciente desactivado. Respuesta: success: true, message: '...', timestamp."
          }
        }
      ]
    },
    {
      "name": "üìã Historias Cl√≠nicas",
      "item": [
        {
          "name": "Crear Historia Cl√≠nica",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"informacionMedico\": {\n    \"medicoResponsable\": \"Dra. Ana Mar√≠a Rodr√≠guez\",\n    \"registroMedico\": \"RM-12345\",\n    \"especialidad\": \"Medicina Interna\"\n  },\n  \"informacionConsulta\": {\n    \"motivoConsulta\": \"Control anual de hipertensi√≥n arterial\",\n    \"enfermedadActual\": \"Paciente refiere buen control tensional con medicaci√≥n actual\",\n    \"revisionSistemas\": \"Cardiovascular: TA controlada, sin s√≠ntomas. Respiratorio: Eupneico. Digestivo: Normal.\",\n    \"medicamentosActuales\": \"Losart√°n 50mg 1 tableta cada 24 horas\",\n    \"observaciones\": \"Paciente colaborador, buen cumplimiento terap√©utico\"\n  },\n  \"antecedentesClinico\": {\n    \"antecedentesPersonales\": \"Hipertensi√≥n arterial diagnosticada hace 5 a√±os\",\n    \"antecedentesFamiliares\": \"Padre con HTA, madre con diabetes\",\n    \"antecedentesQuirurgicos\": \"Apendicectom√≠a 2015\",\n    \"antecedentesAlergicos\": \"Penicilina\"\n  },\n  \"examenClinico\": {\n    \"examenFisico\": \"Paciente en buen estado general, normopeso\",\n    \"signosVitales\": \"TA: 125/80 mmHg, FC: 72 lpm, FR: 16 rpm, Temp: 36.8¬∞C\"\n  },\n  \"diagnosticoTratamiento\": {\n    \"diagnosticos\": \"I10 - Hipertensi√≥n esencial (primaria)\",\n    \"planTratamiento\": \"Continuar con Losart√°n 50mg/d√≠a. Control en 3 meses.\"\n  }\n}"
            },
            "url": { "raw": "{{base_url}}/api/historias-clinicas/paciente/{{paciente_id}}", "host": ["{{base_url}}"], "path": ["api","historias-clinicas","paciente","{{paciente_id}}"] },
            "description": "Crea historia cl√≠nica inicial para un paciente. Respuesta: success: true, data: {...}, timestamp."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData && jsonData.success && jsonData.data && jsonData.data.id) {",
                  "    pm.environment.set('historia_id', jsonData.data.id);",
                  "    console.log('‚úÖ Historia creada con ID:', jsonData.data.id);",
                  "} else {",
                  "    console.log('‚ùå Error creando historia:', jsonData);",
                  "}",
                  "pm.test('Respuesta exitosa', function () { pm.response.to.have.status(201); });",
                  "pm.test('Historia creada', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Obtener Historia por Paciente",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/historias-clinicas/paciente/{{paciente_id}}", "host": ["{{base_url}}"], "path": ["api","historias-clinicas","paciente","{{paciente_id}}"] },
            "description": "Obtiene historia cl√≠nica de un paciente. Respuesta: success: true, data: {...}, timestamp."
          }
        },
        {
          "name": "Actualizar Historia Cl√≠nica",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"informacionMedico\": {\n    \"medicoResponsable\": \"Dra. Ana Mar√≠a Rodr√≠guez\",\n    \"registroMedico\": \"RM-12345\",\n    \"especialidad\": \"Medicina Interna\"\n  },\n  \"informacionConsulta\": {\n    \"motivoConsulta\": \"Control trimestral\",\n    \"enfermedadActual\": \"Paciente estable, refiere mejor√≠a en s√≠ntomas\",\n    \"revisionSistemas\": \"Cardiovascular: TA 122/78. Sin otros s√≠ntomas.\",\n    \"medicamentosActuales\": \"Losart√°n 50mg 1 tableta cada 24 horas\",\n    \"observaciones\": \"Paciente refiere buena tolerancia al tratamiento\"\n  },\n  \"examenClinico\": {\n    \"examenFisico\": \"Paciente en buen estado general\",\n    \"signosVitales\": \"TA: 122/78 mmHg, FC: 70 lpm\"\n  },\n  \"diagnosticoTratamiento\": {\n    \"diagnosticos\": \"I10 - Hipertensi√≥n esencial controlada\",\n    \"planTratamiento\": \"Continuar tratamiento actual. Pr√≥ximo control en 3 meses.\"\n  }\n}"
            },
            "url": { "raw": "{{base_url}}/api/historias-clinicas/{{historia_id}}", "host": ["{{base_url}}"], "path": ["api","historias-clinicas","{{historia_id}}"] },
            "description": "Actualiza historia cl√≠nica existente. Respuesta: success: true, data: {...}, timestamp."
          }
        }
      ]
    },
    {
      "name": "üè• Consultas M√©dicas",
      "item": [
        {
          "name": "Crear Consulta M√©dica",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"informacionMedico\": {\n    \"medicoTratante\": \"Dra. Ana Mar√≠a Rodr√≠guez\",\n    \"registroMedico\": \"RM-12345\",\n    \"especialidad\": \"Medicina Interna\"\n  },\n  \"detalleConsulta\": {\n    \"fechaConsulta\": \"2024-01-15T10:30:00\",\n    \"motivoConsulta\": \"Seguimiento de hipertensi√≥n arterial\",\n    \"enfermedadActual\": \"Paciente refiere cefalea leve ocasional\",\n    \"revisionSistemas\": \"Cardiovascular: TA elevada en mediciones caseras. Respiratorio: Normal.\",\n    \"tipoConsulta\": \"CONTROL\"\n  },\n  \"examenClinico\": {\n    \"examenFisico\": \"Paciente en buen estado general, normopeso\",\n    \"signosVitales\": \"TA: 135/85 mmHg, FC: 75 lpm, FR: 16 rpm, Temp: 36.7¬∞C\"\n  },\n  \"diagnosticoTratamiento\": {\n    \"diagnosticoPrincipal\": \"I10 - Hipertensi√≥n esencial\",\n    \"planManejo\": \"Ajustar dosis de Losart√°n a 100mg/d√≠a. Control en 15 d√≠as.\",\n    \"medicamentosFormulados\": \"Losart√°n 100mg 1 tableta cada 24 horas\",\n    \"recomendaciones\": \"Tomar medicaci√≥n en la ma√±ana. Medir TA diariamente.\"\n  },\n  \"seguimiento\": {\n    \"indicaciones\": \"Medir TA diariamente y registrar valores. Acudir a urgencias si TA > 180/110.\",\n    \"proximaCita\": \"2024-01-30T10:30:00\"\n  }\n}"
            },
            "url": { "raw": "{{base_url}}/api/consultas/historia/{{historia_id}}", "host": ["{{base_url}}"], "path": ["api","consultas","historia","{{historia_id}}"] },
            "description": "Crea nueva consulta m√©dica. Respuesta: success: true, data: {...}, timestamp."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData && jsonData.success && jsonData.data && jsonData.data.id) {",
                  "    pm.environment.set('consulta_id', jsonData.data.id);",
                  "    console.log('‚úÖ Consulta creada con ID:', jsonData.data.id);",
                  "}",
                  "pm.test('Respuesta exitosa', function () { pm.response.to.have.status(201); });",
                  "pm.test('Consulta creada', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Obtener Consulta por ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/consultas/{{consulta_id}}", "host": ["{{base_url}}"], "path": ["api","consultas","{{consulta_id}}"] },
            "description": "Obtiene consulta espec√≠fica por ID. Respuesta: success: true, data: {...}, timestamp."
          }
        },
        {
          "name": "Obtener Consultas por Historia",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": {
              "raw": "{{base_url}}/api/consultas/historia/{{historia_id}}?page=0&size=10",
              "host": ["{{base_url}}"],
              "path": ["api","consultas","historia","{{historia_id}}"],
              "query": [
                { "key": "page", "value": "0" },
                { "key": "size", "value": "10" }
              ]
            },
            "description": "Lista consultas de una historia cl√≠nica. Respuesta: success: true, data: {page, content[]}, timestamp."
          }
        },
        {
          "name": "Actualizar Consulta",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"informacionMedico\": {\n    \"medicoTratante\": \"Dra. Ana Mar√≠a Rodr√≠guez\",\n    \"registroMedico\": \"RM-12345\",\n    \"especialidad\": \"Medicina Interna\"\n  },\n  \"detalleConsulta\": {\n    \"fechaConsulta\": \"2024-01-15T10:30:00\",\n    \"motivoConsulta\": \"Seguimiento actualizado\",\n    \"enfermedadActual\": \"Paciente refiere mejor√≠a con nueva dosis\",\n    \"revisionSistemas\": \"Cardiovascular: TA controlada con nueva medicaci√≥n.\",\n    \"tipoConsulta\": \"CONTROL\"\n  },\n  \"examenClinico\": {\n    \"examenFisico\": \"Paciente en buen estado general\",\n    \"signosVitales\": \"TA: 125/80 mmHg, FC: 72 lpm\"\n  },\n  \"diagnosticoTratamiento\": {\n    \"diagnosticoPrincipal\": \"I10 - Hipertensi√≥n esencial controlada\",\n    \"planManejo\": \"Continuar con Losart√°n 100mg/d√≠a. Control en 1 mes.\",\n    \"medicamentosFormulados\": \"Losart√°n 100mg 1 tableta cada 24 horas\",\n    \"recomendaciones\": \"Continuar monitoreo de TA en casa.\"\n  },\n  \"seguimiento\": {\n    \"indicaciones\": \"Medir TA semanalmente. Mantener registro.\",\n    \"proximaCita\": \"2024-02-15T10:30:00\"\n  }\n}"
            },
            "url": { "raw": "{{base_url}}/api/consultas/{{consulta_id}}", "host": ["{{base_url}}"], "path": ["api","consultas","{{consulta_id}}"] },
            "description": "Actualiza consulta m√©dica existente. Respuesta: success: true, data: {...}, timestamp."
          }
        },
        {
          "name": "Eliminar Consulta",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/consultas/{{consulta_id}}", "host": ["{{base_url}}"], "path": ["api","consultas","{{consulta_id}}"] },
            "description": "Elimina consulta m√©dica. Respuesta: success: true, message: '...', timestamp."
          }
        }
      ]
    },
    {
      "name": "üìÑ Documentos M√©dicos",
      "item": [
        {
          "name": "Crear Documento M√©dico",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"historiaClinicaId\": {{historia_id}},\n  \"nombre\": \"Resultado de Laboratorio\",\n  \"tipo\": \"LABORATORIO\",\n  \"descripcion\": \"Ex√°menes de control de hipertensi√≥n\",\n  \"contenido\": \"Colesterol Total: 180 mg/dL\\nHDL: 45 mg/dL\\nLDL: 110 mg/dL\\nTriglic√©ridos: 150 mg/dL\\nGlicemia: 95 mg/dL\"\n}"
            },
            "url": { "raw": "{{base_url}}/api/documentos/historia/{{historia_id}}", "host": ["{{base_url}}"], "path": ["api","documentos","historia","{{historia_id}}"] },
            "description": "Crea documento m√©dico. Respuesta: success: true, data: {...}, timestamp."
          }
        },
        {
          "name": "Obtener Documentos por Historia",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": {
              "raw": "{{base_url}}/api/documentos/historia/{{historia_id}}?page=0&size=10",
              "host": ["{{base_url}}"],
              "path": ["api","documentos","historia","{{historia_id}}"],
              "query": [
                { "key": "page", "value": "0" },
                { "key": "size", "value": "10" }
              ]
            },
            "description": "Lista documentos de una historia cl√≠nica. Respuesta: success: true, data: {page, content[]}, timestamp."
          }
        }
      ]
    },
    {
      "name": "üìÖ Citas M√©dicas",
      "item": [
        {
          "name": "Crear Cita M√©dica",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fechaHoraCita\": \"2024-12-15T10:30:00\",\n  \"motivo\": \"Consulta de control de hipertensi√≥n arterial\",\n  \"medicoAsignado\": \"Dra. Ana Mar√≠a Rodr√≠guez\",\n  \"estado\": \"PROGRAMADA\",\n  \"notas\": \"Paciente refiere cefalea ocasional. Traer registros de TA casera.\"\n}"
            },
            "url": { "raw": "{{base_url}}/api/citas/paciente/{{paciente_id}}", "host": ["{{base_url}}"], "path": ["api","citas","paciente","{{paciente_id}}"] },
            "description": "Crea nueva cita m√©dica para un paciente. Respuesta: success: true, data: {...}, timestamp."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "var jsonData = pm.response.json();",
                  "if (jsonData && jsonData.success && jsonData.data && jsonData.data.id) {",
                  "    pm.environment.set('cita_id', jsonData.data.id);",
                  "    console.log('‚úÖ Cita creada con ID:', jsonData.data.id);",
                  "}",
                  "pm.test('Respuesta exitosa', function () { pm.response.to.have.status(201); });",
                  "pm.test('Cita creada', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Obtener Cita por ID",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/citas/{{cita_id}}", "host": ["{{base_url}}"], "path": ["api","citas","{{cita_id}}"] },
            "description": "Obtiene cita m√©dica espec√≠fica por ID. Respuesta: success: true, data: {...}, timestamp."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Respuesta exitosa', function () { pm.response.to.have.status(200); });",
                  "pm.test('Datos de la cita correctos', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Obtener Citas por Paciente",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": {
              "raw": "{{base_url}}/api/citas/paciente/{{paciente_id}}?page=0&size=10",
              "host": ["{{base_url}}"],
              "path": ["api","citas","paciente","{{paciente_id}}"],
              "query": [
                { "key": "page", "value": "0" },
                { "key": "size", "value": "10" }
              ]
            },
            "description": "Lista citas m√©dicas de un paciente con paginaci√≥n. Respuesta: success: true, data: {page, content[]}, timestamp."
          }
        },
        {
          "name": "Obtener Citas Activas por Paciente",
          "request": {
            "method": "GET",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/citas/paciente/{{paciente_id}}/activas", "host": ["{{base_url}}"], "path": ["api","citas","paciente","{{paciente_id}}","activas"] },
            "description": "Lista citas m√©dicas activas de un paciente. Respuesta: success: true, data: [...], timestamp."
          }
        },
        {
          "name": "Actualizar Cita M√©dica",
          "request": {
            "method": "PUT",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"fechaHoraCita\": \"2024-12-15T11:00:00\",\n  \"motivo\": \"Consulta de control de hipertensi√≥n arterial\",\n  \"medicoAsignado\": \"Dra. Ana Mar√≠a Rodr√≠guez\",\n  \"estado\": \"CONFIRMADA\",\n  \"notas\": \"Cita confirmada. Paciente refiere cefalea ocasional. Traer registros de TA casera.\"\n}"
            },
            "url": { "raw": "{{base_url}}/api/citas/{{cita_id}}", "host": ["{{base_url}}"], "path": ["api","citas","{{cita_id}}"] },
            "description": "Actualiza cita m√©dica existente. Respuesta: success: true, data: {...}, timestamp."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Respuesta exitosa', function () { pm.response.to.have.status(200); });",
                  "pm.test('Cita actualizada', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "});"
                ]
              }
            }
          ]
        },
        {
          "name": "Eliminar Cita M√©dica",
          "request": {
            "method": "DELETE",
            "header": [{ "key": "Authorization", "value": "Bearer {{jwt_token}}" }],
            "url": { "raw": "{{base_url}}/api/citas/{{cita_id}}", "host": ["{{base_url}}"], "path": ["api","citas","{{cita_id}}"] },
            "description": "Elimina cita m√©dica (soft delete). Respuesta: success: true, message: '...', timestamp."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Respuesta exitosa', function () { pm.response.to.have.status(204); });"
                ]
              }
            }
          ]
        },
        {
          "name": "Crear Consulta desde Cita",
          "request": {
            "method": "POST",
            "header": [
              { "key": "Content-Type", "value": "application/json" },
              { "key": "Authorization", "value": "Bearer {{jwt_token}}" }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"informacionMedico\": {\n    \"medicoTratante\": \"Dra. Ana Mar√≠a Rodr√≠guez\",\n    \"registroMedico\": \"RM-12345\",\n    \"especialidad\": \"Medicina Interna\"\n  },\n  \"detalleConsulta\": {\n    \"fechaConsulta\": \"2024-12-15T11:00:00\",\n    \"motivoConsulta\": \"Consulta programada - Seguimiento de hipertensi√≥n arterial\",\n    \"enfermedadActual\": \"Paciente refiere cefalea leve ocasional\",\n    \"revisionSistemas\": \"Cardiovascular: TA elevada en mediciones caseras. Respiratorio: Normal.\",\n    \"tipoConsulta\": \"CONTROL\"\n  },\n  \"examenClinico\": {\n    \"examenFisico\": \"Paciente en buen estado general, normopeso\",\n    \"signosVitales\": \"TA: 135/85 mmHg, FC: 75 lpm, FR: 16 rpm, Temp: 36.7¬∞C\"\n  },\n  \"diagnosticoTratamiento\": {\n    \"diagnosticoPrincipal\": \"I10 - Hipertensi√≥n esencial\",\n    \"planManejo\": \"Ajustar dosis de Losart√°n a 100mg/d√≠a. Control en 15 d√≠as.\",\n    \"medicamentosFormulados\": \"Losart√°n 100mg 1 tableta cada 24 horas\",\n    \"recomendaciones\": \"Tomar medicaci√≥n en la ma√±ana. Medir TA diariamente.\"\n  },\n  \"seguimiento\": {\n    \"indicaciones\": \"Medir TA diariamente y registrar valores. Acudir a urgencias si TA > 180/110.\",\n    \"proximaCita\": \"2024-12-30T11:00:00\"\n  }\n}"
            },
            "url": { "raw": "{{base_url}}/api/consultas/cita/{{cita_id}}/historia/{{historia_id}}", "host": ["{{base_url}}"], "path": ["api","consultas","cita","{{cita_id}}","historia","{{historia_id}}"] },
            "description": "Crea consulta m√©dica vinculada a una cita existente. Respuesta: success: true, data: {...}, timestamp."
          },
          "event": [
            {
              "listen": "test",
              "script": {
                "exec": [
                  "pm.test('Respuesta exitosa', function () { pm.response.to.have.status(201); });",
                  "pm.test('Consulta creada desde cita', function () {",
                  "    var jsonData = pm.response.json();",
                  "    pm.expect(jsonData.success).to.be.true;",
                  "    pm.expect(jsonData.data).to.have.property('id');",
                  "    pm.expect(jsonData.data).to.have.property('citaId', parseInt(pm.environment.get('cita_id')));",
                  "});"
                ]
              }
            }
          ]
        }
      ]
    }
  ]
}